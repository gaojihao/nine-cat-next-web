{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/upuphone/Desktop/github/nine-cat-next-web/src/components/TencentAd.tsx"],"sourcesContent":["'use client';\n\nimport Script from 'next/script';\nimport { useEffect, useRef } from 'react';\n\ninterface TencentAdProps {\n    appId: string;\n    placementId: string;\n    containerId: string;\n    type?: 'native' | 'banner' | 'interstitial';\n    count?: number;\n}\n\ninterface TencentGDT {\n    push: (config: any) => void;\n    NATIVE: {\n        renderAd: (ad: any, containerId: string) => void;\n        loadAd: (placementId: string) => void;\n    };\n}\n\ndeclare global {\n    interface Window {\n        TencentGDT: TencentGDT;\n    }\n}\n\nconst TencentAd: React.FC<TencentAdProps> = ({\n    appId,\n    placementId,\n    containerId,\n    type = 'native',\n    count = 1,\n}) => {\n    const initialized = useRef(false);\n\n    useEffect(() => {\n        const initAd = () => {\n            if (!initialized.current) {\n                initialized.current = true;\n\n                // 确保 TencentGDT 已经初始化\n                if (typeof window !== 'undefined') {\n                    window.TencentGDT = window.TencentGDT || [];\n                }\n\n                // 等待一小段时间确保脚本完全加载\n                setTimeout(() => {\n                    if (window.TencentGDT) {\n                        window.TencentGDT.push({\n                            app_id: appId,\n                            placement_id: placementId,\n                            type: type,\n                            count: count,\n                            onComplete: function (res: any) {\n                                if (res && Array.isArray(res)) {\n                                    try {\n                                        window.TencentGDT.NATIVE.renderAd(res[0], containerId);\n                                    } catch (error) {\n                                        console.error('Failed to render ad:', error);\n                                    }\n                                } else {\n                                    setTimeout(function () {\n                                        window.TencentGDT.NATIVE.loadAd(placementId);\n                                    }, 3000);\n                                }\n                            }\n                        });\n                    }\n                }, 100);\n            }\n        };\n\n        // 如果脚本已经加载完成，直接初始化\n        if (window.TencentGDT) {\n            initAd();\n        }\n\n        // 监听脚本加载完成事件\n        const script = document.querySelector('#tencent-gdt-script');\n        if (script) {\n            script.addEventListener('load', initAd);\n        }\n\n        return () => {\n            if (script) {\n                script.removeEventListener('load', initAd);\n            }\n        };\n    }, [appId, placementId, containerId, type, count]);\n\n    return (\n        <>\n            <Script\n                id=\"tencent-gdt-script\"\n                src=\"//qzs.qq.com/qzone/biz/res/i.js\"\n                strategy=\"beforeInteractive\"\n                onLoad={() => {\n                    if (typeof window !== 'undefined') {\n                        window.TencentGDT = window.TencentGDT || [];\n                    }\n                }}\n                onError={(e) => {\n                    console.error('Failed to load TencentGDT script:', e);\n                }}\n            />\n            <div id={containerId}></div>\n        </>\n    );\n};\n\nexport default TencentAd;"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AA2BA,MAAM,YAAsC,CAAC,EACzC,KAAK,EACL,WAAW,EACX,WAAW,EACX,OAAO,QAAQ,EACf,QAAQ,CAAC,EACZ;IACG,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAE;IAE3B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,SAAS;YACX,IAAI,CAAC,YAAY,OAAO,EAAE;gBACtB,YAAY,OAAO,GAAG;gBAEtB,sBAAsB;gBACtB,uCAAmC;;gBAEnC;gBAEA,kBAAkB;gBAClB,WAAW;oBACP,IAAI,OAAO,UAAU,EAAE;wBACnB,OAAO,UAAU,CAAC,IAAI,CAAC;4BACnB,QAAQ;4BACR,cAAc;4BACd,MAAM;4BACN,OAAO;4BACP,YAAY,SAAU,GAAQ;gCAC1B,IAAI,OAAO,MAAM,OAAO,CAAC,MAAM;oCAC3B,IAAI;wCACA,OAAO,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,EAAE;oCAC9C,EAAE,OAAO,OAAO;wCACZ,QAAQ,KAAK,CAAC,wBAAwB;oCAC1C;gCACJ,OAAO;oCACH,WAAW;wCACP,OAAO,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC;oCACpC,GAAG;gCACP;4BACJ;wBACJ;oBACJ;gBACJ,GAAG;YACP;QACJ;QAEA,mBAAmB;QACnB,IAAI,OAAO,UAAU,EAAE;YACnB;QACJ;QAEA,aAAa;QACb,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,IAAI,QAAQ;YACR,OAAO,gBAAgB,CAAC,QAAQ;QACpC;QAEA,OAAO;YACH,IAAI,QAAQ;gBACR,OAAO,mBAAmB,CAAC,QAAQ;YACvC;QACJ;IACJ,GAAG;QAAC;QAAO;QAAa;QAAa;QAAM;KAAM;IAEjD,qBACI;;0BACI,8OAAC,8HAAA,CAAA,UAAM;gBACH,IAAG;gBACH,KAAI;gBACJ,UAAS;gBACT,QAAQ;oBACJ,uCAAmC;;oBAEnC;gBACJ;gBACA,SAAS,CAAC;oBACN,QAAQ,KAAK,CAAC,qCAAqC;gBACvD;;;;;;0BAEJ,8OAAC;gBAAI,IAAI;;;;;;;;AAGrB;uCAEe"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}