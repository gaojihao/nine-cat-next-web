{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/fanhui/github/nine-cat-next-web/src/utils/http.ts"],"sourcesContent":["import axios, { AxiosResponse } from 'axios';\n\ninterface IServerData<T> {\n    code: number;\n    data: T;\n    msg: string;\n}\n\nconst http = axios.create({\n    timeout: 5000,\n    headers: {\n        osType: '234234',\n        sysVersion: '234',\n        appPlatform: 'r24',\n        storeChanel: '234',\n        appVersion: '2342',\n        buildVersion: '3424',\n        signValue: '23424',\n        uuid: '242342',\n        timestamp: '23424'\n    },\n});\n\nhttp.interceptors.response.use(\n    (res: AxiosResponse<IServerData<unknown>>) => {\n        const { data } = res;\n        if (data.code === 200) {\n            return res;\n        }\n\n        if (data.code === 100010) {\n            location.href = '/login';\n            return Promise.reject(data);\n        }\n\n        return Promise.reject(data);\n    },\n    (error) => Promise.reject(error),\n);\n\nexport const HttpGet = <T>(url: string, params?: unknown) =>\n    http.get<IServerData<T>>(url, { params }).then((resp) => resp.data.data);\n"],"names":[],"mappings":";;;AAAA;;AAQA,MAAM,OAAO,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACtB,SAAS;IACT,SAAS;QACL,QAAQ;QACR,YAAY;QACZ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,cAAc;QACd,WAAW;QACX,MAAM;QACN,WAAW;IACf;AACJ;AAEA,KAAK,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC1B,CAAC;IACG,MAAM,EAAE,IAAI,EAAE,GAAG;IACjB,IAAI,KAAK,IAAI,KAAK,KAAK;QACnB,OAAO;IACX;IAEA,IAAI,KAAK,IAAI,KAAK,QAAQ;QACtB,SAAS,IAAI,GAAG;QAChB,OAAO,QAAQ,MAAM,CAAC;IAC1B;IAEA,OAAO,QAAQ,MAAM,CAAC;AAC1B,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAGvB,MAAM,UAAU,CAAI,KAAa,SACpC,KAAK,GAAG,CAAiB,KAAK;QAAE;IAAO,GAAG,IAAI,CAAC,CAAC,OAAS,KAAK,IAAI,CAAC,IAAI","debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///Users/fanhui/github/nine-cat-next-web/src/utils/mysql.ts"],"sourcesContent":["import type { Pool, PoolOptions, RowDataPacket } from 'mysql2/promise';\nimport mysql from 'mysql2/promise';\n\nexport interface MySqlConfig {\n  host: string;\n  port: number;\n  user: string;\n  password: string;\n  dbname: string;\n  max_open_connection: number;\n  max_idle_connection: number;\n}\n\nconst defaultConfig: MySqlConfig = {\n  host: '111.229.224.211',\n  port: 3306,\n  user: 'earth',\n  password: 'Aa!%wu6ABye6',\n  dbname: 'earth',\n  max_open_connection: 200,\n  max_idle_connection: 10,\n};\n\ntype QueryValues =\n  | string\n  | number\n  | boolean\n  | Date\n  | Buffer\n  | null\n  | Record<string, unknown>;\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var __MYSQL_POOL__: Pool | undefined;\n}\n\nfunction createPool(config: MySqlConfig): Pool {\n  const options: PoolOptions = {\n    host: config.host,\n    port: config.port,\n    user: config.user,\n    password: config.password,\n    database: config.dbname,\n    connectionLimit: config.max_open_connection,\n    maxIdle: config.max_idle_connection,\n    waitForConnections: true,\n    enableKeepAlive: true,\n    keepAliveInitialDelay: 0,\n  };\n\n  return mysql.createPool(options);\n}\n\nexport function getPool(): Pool {\n  if (!globalThis.__MYSQL_POOL__) {\n    globalThis.__MYSQL_POOL__ = createPool(defaultConfig);\n  }\n\n  return globalThis.__MYSQL_POOL__;\n}\n\nexport async function query<T extends RowDataPacket[]>(\n  sql: string,\n  values: QueryValues[] = []\n): Promise<T> {\n  const pool = getPool();\n  const [rows] = await pool.query<T>(sql, values);\n  return rows;\n}\n\nexport async function closePool(): Promise<void> {\n  if (globalThis.__MYSQL_POOL__) {\n    await globalThis.__MYSQL_POOL__.end();\n    globalThis.__MYSQL_POOL__ = undefined;\n  }\n}\n\n"],"names":[],"mappings":";;;;;AACA;;AAYA,MAAM,gBAA6B;IACjC,MAAM;IACN,MAAM;IACN,MAAM;IACN,UAAU;IACV,QAAQ;IACR,qBAAqB;IACrB,qBAAqB;AACvB;AAgBA,SAAS,WAAW,MAAmB;IACrC,MAAM,UAAuB;QAC3B,MAAM,OAAO,IAAI;QACjB,MAAM,OAAO,IAAI;QACjB,MAAM,OAAO,IAAI;QACjB,UAAU,OAAO,QAAQ;QACzB,UAAU,OAAO,MAAM;QACvB,iBAAiB,OAAO,mBAAmB;QAC3C,SAAS,OAAO,mBAAmB;QACnC,oBAAoB;QACpB,iBAAiB;QACjB,uBAAuB;IACzB;IAEA,OAAO,iIAAA,CAAA,UAAK,CAAC,UAAU,CAAC;AAC1B;AAEO,SAAS;IACd,IAAI,CAAC,WAAW,cAAc,EAAE;QAC9B,WAAW,cAAc,GAAG,WAAW;IACzC;IAEA,OAAO,WAAW,cAAc;AAClC;AAEO,eAAe,MACpB,GAAW,EACX,SAAwB,EAAE;IAE1B,MAAM,OAAO;IACb,MAAM,CAAC,KAAK,GAAG,MAAM,KAAK,KAAK,CAAI,KAAK;IACxC,OAAO;AACT;AAEO,eAAe;IACpB,IAAI,WAAW,cAAc,EAAE;QAC7B,MAAM,WAAW,cAAc,CAAC,GAAG;QACnC,WAAW,cAAc,GAAG;IAC9B;AACF","debugId":null}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///Users/fanhui/github/nine-cat-next-web/src/components/share/introduction/Wechat.tsx"],"sourcesContent":["'use client'\n\nimport { HttpGet } from \"@/utils/http\"\nimport { query } from \"@/utils/mysql\"\nimport Link from \"next/link\"\nimport useSWR from 'swr'\n\ninterface IAppInfo {\n    id: number\n    createTime: string\n    appNo: string\n    appVersion: string\n    appUpdateInfo: string\n    downloadUrl: string\n    mode: string\n    isForce: boolean\n}\n\nexport default function Wechat() {\n    query('SELECT * FROM et_app_version').then(rows => {\n        console.log('rows======', rows);\n    });\n    const { data } = useSWR<IAppInfo>('/api/appUpdateConfig/check?appId=com.earth08.tour', HttpGet)\n    const inWechat = typeof window !== 'undefined' && window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?.includes('micromessenger')\n    if (inWechat) {\n        return (\n            <p style={{\n                fontSize: '16px',\n                textAlign: 'center',\n                marginTop: '30px',\n                color: 'rgba(0, 0, 0, 0.4)'\n            }}>\n                点击右上方 <span style={{ color: '#000000' }}>...</span> 选择在浏览器打开\n            </p>\n        )\n    }\n    return (\n        <>\n            <div className='w-full  bg-transparent flex flex-row justify-center items-center'>\n                <Link href={data?.downloadUrl ?? ''} target='_blank' className='bg-gradient-to-r from-amber-500 to-red-500 text-white px-20 py-2 rounded-md'>下载App</Link>\n            </div>\n            <p>版本：{data?.appVersion}</p>\n        </>\n    )\n\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAkBe,SAAS;IACpB,CAAA,GAAA,qHAAA,CAAA,QAAK,AAAD,EAAE,gCAAgC,IAAI,CAAC,CAAA;QACvC,QAAQ,GAAG,CAAC,cAAc;IAC9B;IACA,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,8JAAA,CAAA,UAAM,AAAD,EAAY,qDAAqD,oHAAA,CAAA,UAAO;IAC9F,MAAM,WAAW,gBAAkB,eAAe,OAAO,SAAS,CAAC,SAAS,CAAC,WAAW,GAAG,KAAK,CAAC,oBAAoB,SAAS;IAC9H;;IAYA,qBACI;;0BACI,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAM,MAAM,eAAe;oBAAI,QAAO;oBAAS,WAAU;8BAA8E;;;;;;;;;;;0BAEjJ,8OAAC;;oBAAE;oBAAI,MAAM;;;;;;;;;AAIzB","debugId":null}}]
}