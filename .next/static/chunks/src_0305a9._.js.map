{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/upuphone/Desktop/github/nine-cat-next-web/src/components/TencentAd.tsx"],"sourcesContent":["'use client';\n\nimport Script from 'next/script';\nimport { useEffect, useRef } from 'react';\n\ninterface TencentAdProps {\n    appId: string;\n    placementId: string;\n    containerId: string;\n    type?: 'native' | 'banner' | 'interstitial';\n    count?: number;\n}\n\ninterface TencentGDT {\n    push: (config: any) => void;\n    NATIVE: {\n        renderAd: (ad: any, containerId: string) => void;\n        loadAd: (placementId: string) => void;\n    };\n}\n\ndeclare global {\n    interface Window {\n        TencentGDT: TencentGDT;\n    }\n}\n\nconst TencentAd: React.FC<TencentAdProps> = ({\n    appId,\n    placementId,\n    containerId,\n    type = 'native',\n    count = 1,\n}) => {\n    const initialized = useRef(false);\n\n    useEffect(() => {\n        const initAd = () => {\n            if (!initialized.current) {\n                initialized.current = true;\n\n                // 确保 TencentGDT 已经初始化\n                if (typeof window !== 'undefined') {\n                    window.TencentGDT = window.TencentGDT || [];\n                }\n\n                // 等待一小段时间确保脚本完全加载\n                setTimeout(() => {\n                    if (window.TencentGDT) {\n                        window.TencentGDT.push({\n                            app_id: appId,\n                            placement_id: placementId,\n                            type: type,\n                            count: count,\n                            onComplete: function (res: any) {\n                                if (res && Array.isArray(res)) {\n                                    try {\n                                        window.TencentGDT.NATIVE.renderAd(res[0], containerId);\n                                    } catch (error) {\n                                        console.error('Failed to render ad:', error);\n                                    }\n                                } else {\n                                    setTimeout(function () {\n                                        window.TencentGDT.NATIVE.loadAd(placementId);\n                                    }, 3000);\n                                }\n                            }\n                        });\n                    }\n                }, 100);\n            }\n        };\n\n        // 如果脚本已经加载完成，直接初始化\n        if (window.TencentGDT) {\n            initAd();\n        }\n\n        // 监听脚本加载完成事件\n        const script = document.querySelector('#tencent-gdt-script');\n        if (script) {\n            script.addEventListener('load', initAd);\n        }\n\n        return () => {\n            if (script) {\n                script.removeEventListener('load', initAd);\n            }\n        };\n    }, [appId, placementId, containerId, type, count]);\n\n    return (\n        <>\n            <Script\n                id=\"tencent-gdt-script\"\n                src=\"//qzs.qq.com/qzone/biz/res/i.js\"\n                strategy=\"beforeInteractive\"\n                onLoad={() => {\n                    if (typeof window !== 'undefined') {\n                        window.TencentGDT = window.TencentGDT || [];\n                    }\n                }}\n                onError={(e) => {\n                    console.error('Failed to load TencentGDT script:', e);\n                }}\n            />\n            <div id={containerId}></div>\n        </>\n    );\n};\n\nexport default TencentAd;"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AA2BA,MAAM,YAAsC,CAAC,EACzC,KAAK,EACL,WAAW,EACX,WAAW,EACX,OAAO,QAAQ,EACf,QAAQ,CAAC,EACZ;;IACG,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IAE3B,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACN,MAAM;8CAAS;oBACX,IAAI,CAAC,YAAY,OAAO,EAAE;wBACtB,YAAY,OAAO,GAAG;wBAEtB,sBAAsB;wBACtB,wCAAmC;4BAC/B,OAAO,UAAU,GAAG,OAAO,UAAU,IAAI,EAAE;wBAC/C;wBAEA,kBAAkB;wBAClB;0DAAW;gCACP,IAAI,OAAO,UAAU,EAAE;oCACnB,OAAO,UAAU,CAAC,IAAI,CAAC;wCACnB,QAAQ;wCACR,cAAc;wCACd,MAAM;wCACN,OAAO;wCACP,UAAU;0EAAE,SAAU,GAAQ;gDAC1B,IAAI,OAAO,MAAM,OAAO,CAAC,MAAM;oDAC3B,IAAI;wDACA,OAAO,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,EAAE;oDAC9C,EAAE,OAAO,OAAO;wDACZ,QAAQ,KAAK,CAAC,wBAAwB;oDAC1C;gDACJ,OAAO;oDACH;sFAAW;4DACP,OAAO,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC;wDACpC;qFAAG;gDACP;4CACJ;;oCACJ;gCACJ;4BACJ;yDAAG;oBACP;gBACJ;;YAEA,mBAAmB;YACnB,IAAI,OAAO,UAAU,EAAE;gBACnB;YACJ;YAEA,aAAa;YACb,MAAM,SAAS,SAAS,aAAa,CAAC;YACtC,IAAI,QAAQ;gBACR,OAAO,gBAAgB,CAAC,QAAQ;YACpC;YAEA;uCAAO;oBACH,IAAI,QAAQ;wBACR,OAAO,mBAAmB,CAAC,QAAQ;oBACvC;gBACJ;;QACJ;8BAAG;QAAC;QAAO;QAAa;QAAa;QAAM;KAAM;IAEjD,qBACI;;0BACI,6LAAC,iIAAA,CAAA,UAAM;gBACH,IAAG;gBACH,KAAI;gBACJ,UAAS;gBACT,QAAQ;oBACJ,wCAAmC;wBAC/B,OAAO,UAAU,GAAG,OAAO,UAAU,IAAI,EAAE;oBAC/C;gBACJ;gBACA,SAAS,CAAC;oBACN,QAAQ,KAAK,CAAC,qCAAqC;gBACvD;;;;;;0BAEJ,6LAAC;gBAAI,IAAI;;;;;;;;AAGrB;GAlFM;KAAA;uCAoFS"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}